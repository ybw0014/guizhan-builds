(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{326:function(t,e,r){"use strict";var o=r(320);e.a={getAnnouncement:function(t,e){return o.a.get("/announcement/"+e+"/"+t+".md")},getRepos:function(){return o.a.get("/repos.json")},getBuilds:function(t){return o.a.get("/f/".concat(t,"/builds.json"))}}},336:function(t,e,r){"use strict";r(13),r(20),r(71),r(29),r(46);var o=r(321),n=r.n(o),c=r(326);e.a={loadRepos:function(t){return new Promise((function(e,r){n.a.isNil(t.$store.getters["repos/getRepos"])?c.a.getRepos().then((function(r){var o=[],n=[],c={};for(var l in r.data){var f;o.push(l),c[l]=r.data[l];var d=l.split("/")[0];null!==(f=c[l].options)&&void 0!==f&&f.hidden||"redirect"===c[l].type||(d in n?n[d]++:n[d]=1)}t.$store.commit("repos/setRepos",o),t.$store.commit("repos/setReposInfo",c),t.$store.commit("repos/setUsers",n),e()})):e()}))},getRepos:function(t){return t.$store.getters["repos/getRepos"]},getUsers:function(t){return t.$store.getters["repos/getUsers"]},getInfoByRepoStr:function(t){var e=t.split(":"),r=e[0].split("/");return{user:r[0],repo:r[1],branch:e[1]}},exists:function(t,e){var r=this,o=!1;return n.a.forEach(t,(function(t){var c=r.getInfoByRepoStr(t),l=c.user,f=c.repo,d=c.branch;return!n.a.isNil(e.user)&&e.user!==l||(!n.a.isNil(e.repo)&&e.repo!==f||(!n.a.isNil(e.branch)&&e.branch!==d||(o=!0,!1)))})),o},getRepoInfo:function(t,e){return t.$store.getters["repos/getReposInfo"][e]},getDir:function(t,e){var r,o=null===(r=this.getRepoInfo(t,e).options)||void 0===r?void 0:r.customDir;if(n.a.isNil(o)){var c=this.getInfoByRepoStr(e),l=c.user,f=c.repo,d=c.branch;return"".concat(l,"/").concat(f,"/").concat(d)}return o}}},355:function(t,e,r){"use strict";r(13),r(29),r(72);var o=r(321),n=r.n(o),c=r(326);e.a={loadBuilds:function(t,e,r){return new Promise((function(o,l){n.a.isNil(t.$store.getters["builds/getBuilds"](e))?c.a.getBuilds(r).then((function(r){t.$store.commit("builds/setLatest",{repoStr:e,latest:r.data.latest});var c=n.a.reverse(n.a.cloneDeep(r.data.builds));t.$store.commit("builds/setBuilds",{repoStr:e,builds:c}),o()})).catch(l):o()}))},getLatest:function(t,e){return t.$store.getters["builds/getLatest"](e)},getBuilds:function(t,e){return t.$store.getters["builds/getBuilds"](e)},exists:function(t,e){var r=!1;return n.a.forEach(t,(function(t){return!n.a.isNil(e.id)&&e.id.toString()!==t.id.toString()||(!n.a.isNil(e.commit)&&e.commit!==t.commit||(!n.a.isNil(e.timestamp)&&e.timestamp!==t.timestamp||(r=!0,!1)))})),r}}},379:function(t,e,r){"use strict";r.r(e);r(46),r(20),r(66),r(13),r(29);var o=r(321),n=r.n(o),c=r(336),l=r(355),f={layout:"main",data:function(){return{user:this.$route.params.user,repo:this.$route.params.repo,branch:this.$route.params.branch,repoInfo:null,repoDir:""}},head:function(){return{title:"".concat(this.repo," (").concat(this.branch,") - ").concat(this.$t("title"))}},computed:{repoStr:function(){return"".concat(this.user,"/").concat(this.repo,":").concat(this.branch)}},mounted:function(){var t=this;c.a.loadRepos(this).then((function(){var e={user:t.user,repo:t.repo,branch:t.branch};if(c.a.exists(c.a.getRepos(t),e))if(t.repoInfo=c.a.getRepoInfo(t,t.repoStr),"redirect"!==t.repoInfo.type)t.repoDir=c.a.getDir(t,t.repoStr),l.a.loadBuilds(t,t.repoStr,t.repoDir).then((function(){var e=l.a.getBuilds(t,t.repoStr),r=!1;n.a.forEach(e,(function(e){if(e.success)return r=!0,t.$router.replace({name:"user-repo-branch-build",params:{build:e.id}}),!1})),r||t.$router.replace({name:"user-repo-branch-build",params:{build:n.a.first(e).id}})})).catch((function(){t.$nuxt.error({statusCode:404,message:"Not found"})}));else{var r=c.a.getInfoByRepoStr(t.repoInfo.options.repo);t.$router.replace({name:"user-repo-branch",params:r})}else t.$nuxt.error({statusCode:404,message:"Not found"})}))}},d=r(45),component=Object(d.a)(f,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null);e.default=component.exports}}]);